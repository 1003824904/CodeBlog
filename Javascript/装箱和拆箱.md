# 装箱和拆箱

面试的时候我问这个东西，有百分之90以上的人都是一脸懵逼。所以我觉的有必要写一下这个东西。

- 装箱：指的是基本类型的包装成引用类型
- 拆箱：引用类型转换为基本类型

其实不仅仅是`js`，很多其他的语言中也有这种操作。下面就来详细的说一下

## 装箱

装箱的操作在我看来更加的重要一些，因为这个操作不需要你来做，`JS`已经帮你做好了。我觉的大家应该每一天都在用， 但是知道的人却又很少。装箱说直白一点就是`js`自动的把一个基本类型的数据包装为一个具有属性和方法的引用类型数据(对象)。
> 每当读取一个基本类型的时候，后台就会创建一个对应的基本包装类型对象，从而让我们能够调用一些方法来操作这些数据。   --来自《javascript高级程序设计》

熟悉js内存的人应该了解基本数据类型是存在栈中的一串数据(不熟悉可以先看[这里](https://github.com/QDMarkMan/CodeBlog/blob/master/Javascript/js%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98.md))，他并没有属性或者方法。如果我们要访问基本类型的属性和方法，那只能借助存放在堆内存中的对象了，这个时候装箱就应运而生了。

### 自动装箱

当把一个原始值当作对象使用函数或者访问属性时，会触发自动装箱操作。例如下面的操作
```js
var a = "a"  // string类型
console.log(a.length)
var b = a.toUpperCase()
```

1. 根据值的原始类型构造不同类的对象。构造出一个新的`String`类对象，就相当于`var a = new Object("a");`
2. 执行对该对象的操作（调用方法等等）。
3. 返回操作结果后，将该对象丢弃。

所以，**值类型还是值类型，引用类型还是引用类型，** 他们之间存在着明显的差异。js只是看起来`一切皆是对象`

## 拆箱

拆箱是为了**获取到封装对象中的基本数据类型数据**。 这个比较简单，通过`valueOf`函数进行拆箱操作。

```js
let strObj = new String('str'); // strObj 是对象类型，字符串  String {"str"}
let str = strObj.valueOf(); // str 是基本数据类型，字符串
```

# 总结

装箱和拆箱的东西并不多，但是对于我们更深的理解`js`还是有帮助的

如果觉得有用得话给个⭐吧